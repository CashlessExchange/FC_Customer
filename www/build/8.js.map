{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Platform } from 'ionic-angular';\nimport { AlertController } from 'ionic-angular';\nimport { Storage } from '@ionic/Storage';\nimport { FingerprintAIO } from '@ionic-native/fingerprint-aio';\n\nimport { AuthServiceProvider } from '../../providers/auth-service/auth-service';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n\n  private creds: { mail: string, password: string } = { mail: \"\", password: \"\" };\n  private customerid: string;\n\n  constructor(\n    public platform: Platform,\n    private fingerprint: FingerprintAIO, \n    private storage: Storage, \n    private alertCtrl: AlertController, \n    public navCtrl: NavController, \n    public navParams: NavParams, \n    private authSrvce: AuthServiceProvider) {\n    this.setData();\n  }\n\n  async setData() {\n    await this.storage.get('loginname').then((data) => {\n      if (data != null && data != undefined) {\n        this.creds.mail = data;\n      }\n    });\n    await this.storage.get('user-id').then((data) => {\n      if (data != null && data != undefined) {\n        this.customerid = data;\n        if (!this.platform.is('core')) {\n          this.fingerprintLogin();\n        }\n      }\n    });\n\n  }\n\n  async fingerprintLogin() {\n    await this.fingerprint.isAvailable().then(result => {\n\n      this.fingerprint.show({\n        clientId: \"freedom-choice\",\n        clientSecret: \"password\",\n        localizedReason: \"please authenticate\"\n      }).then(result => {\n        this.navCtrl.setRoot('MenuPage');\n      }).catch((err) => {\n        console.log(err);\n      });\n    });\n  }\n\n  async doLogin(creds: { mail: string, password: string }) {\n\n    let type = \"login.php?email=\" + creds.mail + \"&password=\" + creds.password;\n    let auth: any = await this.authSrvce.serviceFreedom(creds, type);\n    if (auth.success === 1 && auth.message === \"login success\") {\n\n      await this.storage.ready().then((data) => {\n        data.setItem('loginname', creds.mail);\n      });\n      await this.storage.ready().then((data) => {\n        data.setItem('user-id', auth.customerid);\n      });\n      this.navCtrl.setRoot('MenuPage');\n    } else {\n      let somwrong = this.alertCtrl.create({\n        title: 'Login Failed',\n        subTitle: 'Username or Password are not correct',\n        buttons: ['OK']\n      });\n      somwrong.present();\n    }\n\n  }\n\n  doSignup() {\n    this.navCtrl.push('SignupPage');\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}