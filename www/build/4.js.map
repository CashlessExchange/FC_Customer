{"version":3,"sources":["../../src/pages/special/special.module.ts","../../src/pages/special/special.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SpecialPage } from './special';\n\n@NgModule({\n  declarations: [\n    SpecialPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SpecialPage),\n  ],\n})\nexport class SpecialPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/special/special.module.ts","import { Component, ViewChild, ElementRef} from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController } from 'ionic-angular';\nimport {Storage}from '@ionic/Storage';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { FormControl } from \"@angular/forms\";\nimport {CertificatePage} from '../certificate/certificate';\nimport {CertificateService} from '../../services/certificate.service';\nimport { AuthServiceProvider } from '../../providers/auth-service/auth-service';\n\n\nimport {} from '@types/googlemaps'; \n\n@IonicPage()\n@Component({\n  selector: 'page-special',\n  templateUrl: 'special.html',\n})\nexport class SpecialPage {\n\n  @ViewChild('map') mapElement;\n  \n\n  private latitude: number;\n  private longitude: number;\n  private searchControl: FormControl;\n  private zoom: number;\n  private formatted_address: string;\n  private splitted:string[]=[];\n  private certs:any=[];\n  private certificates:string[];\n  private yourlocation:any;\n  private lat: number = -32.9477132;\n  private lng: number = -60.630465800000025;\n  private map : any;\n  private customerid:string=\"\";\n  private date:string;\n  private merchantid:string;\n  private price:string;\n  private logo:string=\"assets/img/shop_merchant.png\";\n\n  constructor(\n    public loadingCtrl: LoadingController, \n    private autService:AuthServiceProvider, \n    private certiService:CertificateService, \n    private geolocation: Geolocation, \n    private storage:Storage, \n    public navCtrl: NavController, \n    public navParams: NavParams) {\n\n  }\n\n  async ionViewWillEnter(){\n\n    const loading = this.loadingCtrl.create({\n      spinner: 'hide',\n      content: `Please Wait..\n      \n      <div class=\"custom-spinner-container\">\n        <div class=\"custom-spinner-box\"></div>\n      </div>`\n    });\n\n    this.certs = [];\n    loading.present();\n    await this.loadCertis();\n    this.detokenCertificate();\n    //this.getMerchantData();\n    loading.dismiss();\n  }\n\n  showCert(token){\n    console.log(token);\n    this.navCtrl.push(CertificatePage, {token:token});\n  }\n\n  async detokenCertificate(){\n    this.certificates;\n\n    if(this.certificates != null || this.certificates != undefined){\n\n    \n    for (let entry of this.certificates) {\n      \n            let token ={\n              \"APIKey\":\"bDjnJKu7ip7097Vfq46I\",\n              \"TokenExID\":\"4323829200543105\",\n              \"Token\":entry\n            };\n      \n            let wsresponse:any;\n            await this.autService.tokenize(token,\"Detokenize\").then((response) =>{\n              let responses:any;\n              console.log(\"test!\"+response);\n              responses=response;\n              if(responses.Success ===false  ){\n                alert(\"error\");\n              }else{\n                wsresponse = responses;\n              }          \n            }) ;\n              //alert(responses.Value);\n              this.splitted = wsresponse.Value.split(\".\");\n              let date=this.splitted[0];\n              let customerid = this.splitted[1];\n              let merchantid = this.splitted[2];\n\n              let merchantdata:any = await this.getMerchantData(merchantid);\n              let merchantname = merchantdata.name;\n              let merchantlogo = this.logo;\n              console.log(merchantdata.logo.length);\n              if(merchantdata.logo.length != 0){\n                console.log(merchantlogo);\n                \n                merchantlogo = merchantdata.logo;\n              }\n\n              console.log(merchantlogo);\n              let cert:any={\n                merchantid:merchantid,\n                merchantname:merchantname,\n                merchantlogo:merchantlogo,\n                token:entry\n              }\n              console.log(this.splitted);\n              this.certs.push(cert);\n          }\n        }\n\n  }\n\n  async getMerchantData(id:string){\n    \n        let databasecreds={username:\"merchantbackuser\",\n        password:\"150498AV\",\n        reference:\"\",\n        customerid:this.customerid,\n        token:\"\",\n        id:id};\n        console.log(databasecreds);\n    \n        let merch:any = await this.autService.serviceTransaction(databasecreds,\"?getMerchant=\"+\"99\");\n        console.log(merch);\n        return merch;\n    \n      }\n\n  async loadCertis(){\n    \n\n    await this.storage.get('user-id').then((data) =>{\n      if(data != null && data != undefined){\n        this.customerid=data;                    \n      }\n    });\n\n    let databasecreds={username:\"freedom-pos\",\n    password:\"150498AV\",\n    reference:\"\",\n    customerid:this.customerid,\n    token:\"\"};\n    console.log(databasecreds);\n\n    let certis:any = await this.autService.serviceTransaction(databasecreds,\"?getCertis=\"+\"99\");\n    console.log(certis.results);\n    this.certificates=certis.results;\n  }\n\n  async locateMe(){\n    await this.geolocation.getCurrentPosition().then((location)=>{\n      this.yourlocation=location;\n      this.lat=this.yourlocation.coords.latitude;\n      this.lng=this.yourlocation.coords.longitude;\n    }).catch((err)=>{\n      alert(err);\n    });\n    \n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/special/special.ts"],"sourceRoot":""}