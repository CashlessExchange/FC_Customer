{"version":3,"sources":["../../src/pages/special/special.module.ts","../../src/pages/special/special.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SpecialPage } from './special';\n\n@NgModule({\n  declarations: [\n    SpecialPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SpecialPage),\n  ],\n})\nexport class SpecialPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/special/special.module.ts","import { Component, ViewChild, ElementRef} from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController, Platform } from 'ionic-angular';\nimport { NativeStorage } from '@ionic-native/native-storage';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { FormControl } from \"@angular/forms\";\nimport {CertificatePage} from '../certificate/certificate';\nimport { Api } from '../../providers/api/api';\n\n\nimport {} from '@types/googlemaps'; \n\n@IonicPage()\n@Component({\n  selector: 'page-special',\n  templateUrl: 'special.html',\n})\nexport class SpecialPage {\n\n  @ViewChild('map') mapElement;\n  \n\n  private latitude: number;\n  private longitude: number;\n  private searchControl: FormControl;\n  private zoom: number;\n  private formatted_address: string;\n  private splitted:string[]=[];\n  private certs:any=[];\n  private certificates:any[];\n  private yourlocation:any;\n  private lat: number = -32.9477132;\n  private lng: number = -60.630465800000025;\n  private map : any;\n  private customerid:string=\"\";\n  private date:string;\n  private merchantid:string;\n  private price:string;\n  private logo:string=\"assets/img/shop_merchant.png\";\n\n  constructor(\n    private platform:Platform,\n    public loadingCtrl: LoadingController, \n    private autService:Api, \n    private geolocation: Geolocation, \n    private storage:NativeStorage, \n    public navCtrl: NavController, \n    public navParams: NavParams) {\n\n  }\n\n  async ionViewWillEnter(){\n\n    const loading = this.loadingCtrl.create({\n      spinner: 'hide',\n      content: `Please Wait..\n      \n      <div class=\"custom-spinner-container\">\n        <div class=\"custom-spinner-box\"></div>\n      </div>`\n    });\n\n    this.certs = [];\n    loading.present();\n    await this.loadCertis();\n    this.detokenCertificate();\n    //this.getMerchantData();\n    loading.dismiss();\n  }\n\n  showCert(token){\n    console.log(token);\n    this.navCtrl.push(CertificatePage, {token:token});\n  }\n\n  async detokenCertificate(){\n    this.certificates;\n\n    if(this.certificates != null || this.certificates != undefined){\n\n      for (let entry of this.certificates) {\n        \n              let token ={\n                \"APIKey\":\"bDjnJKu7ip7097Vfq46I\",\n                \"TokenExID\":\"4323829200543105\",\n                \"Token\":entry\n              };\n        \n              let wsresponse:any;\n  \n                //alert(responses.Value);\n                let date=entry.timestamp;\n                let customerid = entry.customer_id;\n                let merchantid = entry.merchant_id;\n                let certid= entry.id;\n  \n                let merchantdata:any = await this.getMerchantData(merchantid);\n                let merchantname = merchantdata.name;\n                let merchantlogo = this.logo;\n                console.log(merchantdata.logo.length);\n                if(merchantdata.logo.length != 0){\n                  console.log(merchantlogo);\n                  \n                  merchantlogo = merchantdata.logo;\n                }\n  \n                console.log(merchantlogo);\n                let cert:any={\n                  merchantid:merchantid,\n                  merchantname:merchantname,\n                  merchantlogo:merchantlogo,\n                  token:entry\n                }\n                console.log(this.splitted);\n                this.certs.push(cert);\n            }\n  \n        }\n\n  }\n\n  async getMerchantData(id:string){\n    \n        let databasecreds={username:\"merchantbackuser\",\n        password:\"150498AV\",\n        reference:\"\",\n        customerid:this.customerid,\n        token:\"\",\n        id:id};\n        console.log(databasecreds);\n    \n        let merch:any = await this.autService.serviceTransaction(databasecreds,\"?getMerchant=\"+\"99\");\n        console.log(merch);\n        return merch;\n    \n      }\n\n  async loadCertis(){\n    \n\n    if (!this.platform.is('core')) {\n      await this.storage.getItem('user-id').then((data) => {\n        if (data != null || data != undefined) {\n          this.customerid = data;\n        }\n      });\n    } else {\n      this.customerid = \"73\";\n    }\n\n    let databasecreds={username:\"freedom-app\",\n    password:\"150498AV\",\n    reference:\"\",\n    customerid:this.customerid,\n    token:\"\"};\n    console.log(databasecreds);\n\n    let certis:any = await this.autService.certificateService(databasecreds,\"?getCertis=\"+\"99\");\n    console.log(certis.results);\n    this.certificates=certis.results;\n  }\n\n  async locateMe(){\n    await this.geolocation.getCurrentPosition().then((location)=>{\n      this.yourlocation=location;\n      this.lat=this.yourlocation.coords.latitude;\n      this.lng=this.yourlocation.coords.longitude;\n    }).catch((err)=>{\n      alert(err);\n    });\n    \n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/special/special.ts"],"sourceRoot":""}